{
    "$schema": "http://json-schema.org/draft-05/schema#",
    "definitions": {
        "GranuleIdType": {
          "type": "object",
          "properties": {
            "granule-ur": {"type": "string"},
            "version": {"type": "string"}
          },
          "required": ["granule-ur", "version"]
        },
        "UpdateTypeEnum": {
            "type": "string",
            "enum": ["ADD_TO_EXISTING", "CLEAR_FIELD", "CLEAR_ALL_AND_REPLACE", "FIND_AND_REMOVE", "FIND_AND_REPLACE", "FIND_AND_UPDATE"]
        },
        "UpdateFieldEnum": {
          "type": "string",
          "enum": ["RELATED_URLS"]
        }
    },
    "title": "Ingest Bulk Granule Update",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "concept-ids": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "minItems": 1
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 255
        },
        "granule-ids": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/GranuleIdType"
          },
          "minItems": 1
        },
        "update-type": {
            "$ref": "#/definitions/UpdateTypeEnum"
        },
        "update-field": {
          "$ref": "#/definitions/UpdateFieldEnum"
        },
        "update-value": {
          "oneOf": [{"type": "object"},
                    {"type": "array",
                     "items": {"type": "object"},
                     "minItems": 1}]
        },
        "find-value": {
          "type": "object"
        }
    },
    "required": ["update-type", "update-field", "concept-ids"]
}
