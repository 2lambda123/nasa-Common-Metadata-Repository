{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Grid",
    "type": "object",
    "additionalProperties": false,

    "properties" : {
        "MetadataSpecification": {
            "description": "Contains several fields to define the specifics of the grid",
            "$ref": "#/definitions/MetadataSpecificationType"
        },

        "Name": {
            "description": "Short name for this Grid, may not be human readable and must be unique for the provider.",
            "type": "string",
            "minLength": 1,
            "maxLength": 85
        },

        "LongName": {
            "description": "Long form version of Name, should be human readable and does not have to be unique",
            "type": "string",
            "minLength":1,
            "maxLength": 1024
        },

        "Version": {
            "description": "The edition or iteration of the Grid",
            "type": "string",
            "minLength": 1,
            "maxLength": 20
        },

        "Description": {
            "description": "A brief text that allows others to understand the purpose of the grid",
            "type": "string",
            "minLength": 1,
            "maxLength": 1024
        },

        "GridDefinition": {
            "description": "Contains several fields to define the specifics of the grid",
            "$ref": "#/definitions/GridDefinitionType"
        },

        "Organization": {
            "description": "Contains several fields to name the organization that defines the grid",
            "$ref": "#/definitions/OrganizationType"
        },

        "MetadataDate": {
            "description": "Contains several fields to define the specifics of the grid",
            "$ref": "#/definitions/MetadataDateType"
        },

        "RelatedURLs": {
            "description": "Contains several fields to define the specifics of the grid",
            "type": "array",
            "uniqueItems": true,
            "items": {"$ref": "#/definitions/RelatedURLType"}
        },

        "AdditionalAttribute": {
            "description": "Contains several fields to define the specifics of the grid",
            "$ref": "#/definitions/AdditionalAttributeType"
        }
    },

    "required": ["MetadataSpecification", "Name", "LongName", "Version",
        "Description", "GridDefinition", "Organization", "MetadataDate",
        "AdditionalAttribute"],

    "definitions": {

        "MetadataSpecificationType": {
            "type": "object",
            "additionalProperties": false,
            "description": "This object requires any metadata record that is validated by this schema to provide information about the schema.",
            "properties": {
                "URL": {
                    "description": "This element represents the URL where the schema lives. The schema can be downloaded.",
                    "type": "string",
                    "const": "https://cdn.earthdata.nasa.gov/generic/grid/v0.0.1"
                },
                "Name": {
                    "description": "This element represents the name of the schema.",
                    "type": "string",
                    "const": "Grid"
                },
                "Version": {
                    "description": "This element represents the version of the schema.",
                    "type": "string",
                    "const": "0.0.1"
                }
            },
            "required": ["URL", "Name", "Version"]
        },

        "MetadataDateType": {
            "type": "object",
            "properties": {
                "Create": {
                    "format": "date-time",
                    "type": "string"
                },
                "Update": {
                    "format": "date-time",
                    "type": "string"
                },
                "Review": {
                    "format": "date-time",
                    "type": "string"
                },
                "Delete": {
                    "format": "date-time",
                    "type": "string"
                }
            },
            "required": ["Create"]
        },

        "GridDefinitionType": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "CoordinateReferenceSystemID": {
                    "description": "The Coordinate reference system (CRS) identifier of the grid.",
                    "type": "object",
                    "properties": {
                        "Type": {
                            "type": "string",
                            "enum": ["EPSG:4326", "EPSG:3395", "EPSG:3413", "EPSG:3785", "EPSG:9807", "EPSG:2000.63",
                                "EPSG:2163", "EPSG:3408", "EPSG:3410", "EPSG:6931", "EPSG:6933", "EPSG:3411",
                                "EPSG:9822", "EPSG:54003", "EPSG:54004", "EPSG:54008", "EPSG:54009", "EPSG:26917",
                                "EPSG:900913", "Other"],
                            "minItems": 1,
                            "maxItems": 1
                        },
                        "URL": {
                            "type": "string",
                            "format": "uri",
                            "minLength": 1,
                            "maxLength": 2048
                        }
                    }
                },
                "DimensionSize": {
                    "description": "Latitude/longitude (Columns/Rows) pairs positions on the Earth based on an ellipsoid rather than a sphere.",
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "Height": {
                            "description": "The height associated with the Grid Dimension Size.",
                            "type": "number",
                            "minimum": 0,
                            "minItems": 1,
                            "maxItems": 1
                        },
                        "Width": {
                            "description": "The width associated with the Grid Dimension Size.",
                            "type": "number",
                            "minimum": 0,
                            "minItems": 1,
                            "maxItems": 1
                        },
                        "Time": {
                            "description": "The time associated with the Grid Dimension Size.",
                            "type": "string",
                            "format": "time",
                            "maxItems": 1
                        },
                        "Other": {
                            "description": "The other dimension size associated with the Grid.",
                            "additionalItems": false,
                            "properties": {
                                "Name": {
                                    "description": "The other dimension size name associated with the Grid.",
                                    "minLength": 1,
                                    "maxLength": 85
                                },
                                "Value": {
                                    "description": "The other dimension size value associated with the Grid.",
                                    "minLength": 1,
                                    "maxLength": 20
                                }
                            }
                        }
                    },
                    "required":["Height", "Width"]
                },
                "Resolution": {
                    "description": "The resolution associated with the Grid.",
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "Unit": {
                            "description" : "The resolution unit of the measured size.",
                            "type": "string",
                            "enum": ["km", "degree"]
                        },
                        "LongitudeResolution": {
                            "description": "The Longitudes (columns) associated with the Grid Resolution.",
                            "type": "number",
                            "minimum": 1,
                            "minItems": 1,
                            "maxItems": 1
                        },
                        "LatitudeResolution": {
                            "description": "The Latitudes (Rows) associated with the Grid Resolution.",
                            "type": "number",
                            "minimum": 1,
                            "minItems": 1,
                            "maxItems": 1
                        }
                    },
                    "required":["Unit", "LongitudeResolution", "LatitudeResolution"]
                },
                "Distortion": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "Description": {
                            "description": "A brief description of the grid distortion.",
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 1024,
                            "minItems": 1,
                            "maxItems": 1
                        },
                        "Percent": {
                            "description": "The percentage amount of the distortion.",
                            "type": "number",
                            "minimum": 0,
                            "minItems": 1,
                            "maxItems": 1
                        }
                    }
                },
                "SpatialExtent": {
                    "description": "This class contains attributes which describe the spatial extent of a granule. Spatial Extent includes any or all of Granule Localities, Horizontal Spatial Domain, and Vertical Spatial Domain.",
                    "$ref": "#/definitions/SpatialExtentType"
                }
            },
            "required": ["CoordinateReferenceSystemID", "DimensionSize", "Resolution", "SpatialExtent"]
        },

        "OrganizationType": {
            "type": "object",
            "additionalItems": false,
            "properties": {
                "ShortName": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "pattern": "[\\w\\-&'()\\[\\]/.\"#$%\\^@!*+=,][\\w\\-&'()\\[\\]/.\"#$%\\^@!*+=, ]{1,84}",
                    "maxItems": 1
                },
                "LongName": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 1024,
                    "maxItems": 1
                },
                "RelatedURLs": {
                    "type": "array",
                    "uniqueItems": true,
                    "items": {"$ref": "#/definitions/RelatedURLType"}
                },
                "ContactMechanisms":{
                    "additionalItems": false,
                    "type": "array",
                    "uniqueItems": true,
                    "items": {
                        "properties": {
                            "Type": {
                                "type": "string",
                                "enum": ["Direct Line", "Email", "Facebook", "Fax",
                                    "Mobile", "Modem", "Primary", "TDD/TTY Phone",
                                    "Telephone", "Twitter", "U.S. toll free", "Other"]
                            },
                            "Value": {
                                "type": "string",
                                "minLength": 1,
                                "maxLength": 80
                            }
                        },
                        "required": ["Type", "Value"],
                        "if": {"properties": {"Type": {"const": "Email"}}},
                        "then": {"properties": {"Value": {"format": "email"}}}
                    }
                }
            },
            "required": ["ShortName"]
        },

        "SpatialExtentType": {
            "type": "object",
            "description": "The bounding box consists of west bounding, south bounding, east bounding and north bounding coordinates and the CRS identifier.",
            "additionalProperties":false,
            "properties": {
                "BoundingRectangle": {
                    "description": "Describes the grid's bounding box geographic coverage.",
                    "$ref": "#/definitions/BoundingRectangleType"
                },
                "ScaleExtent": {
                    "description": "Specifies the scale extent coverage of the grid.",
                    "$ref": "#/definitions/ScaleBoundingRectangleType"
                }
            },
            "anyOf": [
                {"required": ["BoundingRectangle"]},
                {"required": ["ScaleExtent"]}
            ]
        },

        "BoundingRectangleType": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "0_360_DegreeProjection": {
                    "description": "Describes whether the grid's bounding box geographic coverage is a -180 longitude by 180 longitude or 0 longitude by 360 longitude Degree Projection.",
                    "type": "boolean"},
                "WestBoundingCoordinate": {
                    "description": "The west bounding coordinate of the bounding box.",
                    "type": "number"
                },
                "SouthBoundingCoordinate": {
                    "description": "The south bounding coordinate of the bounding box.",
                    "type": "number",
                    "minimum": -90,
                    "maximum": 90
                },
                "EastBoundingCoordinate": {
                    "description": "The east bounding coordinate of the bounding box.",
                    "type": "number"
                },
                "NorthBoundingCoordinate": {
                    "description": "The north bounding coordinate of the bounding box.",
                    "type": "number",
                    "minimum": -90,
                    "maximum": 90
                }
            },

            "if": {"properties": {"0_360_DegreeProjection": {"const": true}}},
            "then": {
              "properties": {
                "WestBoundingCoordinate": {"minimum": 0, "maximum": 360},
                "EastBoundingCoordinate": {"minimum": 0, "maximum": 360}}},
            "else": {
              "properties": {
                "WestBoundingCoordinate": {"minimum": -180, "maximum": 180},
                "EastBoundingCoordinate": {"minimum": -180, "maximum": 180}}},

            "required" :["WestBoundingCoordinate",
                "SouthBoundingCoordinate",
                "EastBoundingCoordinate",
                "NorthBoundingCoordinate"]
        },

        "BoundingCoordinateType": {
            "type": "number",
            "if": {"properties" : {"0_360_DegreeProjection": {"const": true}}},
            "then": {"minimum": 0, "maximum": 360},
            "else": {"minimum": -180, "maximum": 180}
        },

        "ScaleBoundingRectangleType": {
            "additionalProperties": false,
            "type": "array",
            "uniqueItems": true,
            "items": {
                "properties": {
                    "CornerBoundingCoordinate": {
                        "description": "The corner bounding coordinates of the bounding rectangle.",
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "0_360_DegreeProjection": {
                                "description": "Describes whether the grid's bounding box geographic coverage is a -180 longitude by 180 longitude or 0 longitude by 360 longitude Degree Projection.",
                                "type": "boolean"},
                            "LatitudePoint": {
                                "description": "The latitude values of a spatially referenced point.",
                                "$ref": "#/definitions/LatitudeType"
                            },
                            "LongitudePoint": {
                                "description": "The Longitude values of a spatially referenced point.",
                                "type": "number"
                            }
                        },

                        "if": {"properties": {"0_360_DegreeProjection": {"const": true}}},
                        "then": {"properties": {"LongitudePoint": {"minimum": 0, "maximum": 360}}},
                        "else": {"properties": {"LongitudePoint": {"minimum": -180, "maximum": 180}}},

                        "required": ["LatitudePoint", "LongitudePoint"]
                    },
                    "MidpointBoundingCoordinate": {
                        "description": "The midpoint bounding coordinates of the bounding rectangle.",
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "0_360_DegreeProjection": {
                                "description": "Describes whether the grid's bounding box geographic coverage is a -180 longitude by 180 longitude or 0 longitude by 360 longitude Degree Projection.",
                                "type": "boolean"},
                            "LatitudePoint": {
                                "description": "The latitude values of a spatially referenced point.",
                                "$ref": "#/definitions/LatitudeType"
                            },
                            "LongitudePoint": {
                                "description": "The Longitude values of a spatially referenced point.",
                                "type": "number"
                            }
                        },

                        "if": {"properties": {"0_360_DegreeProjection": {"const": true}}},
                        "then": {"properties": {"LongitudePoint": {"minimum": 0, "maximum": 360}}},
                        "else": {"properties": {"LongitudePoint": {"minimum": -180, "maximum": 180}}},

                        "required": ["LatitudePoint", "LongitudePoint"]
                    }
                },
                "required": ["CornerBoundingCoordinate", "MidpointBoundingCoordinate"]
            }
        },

        "LatitudeType": {
            "description": "The latitude value of a spatially referenced point, in degrees. Latitude values range from -90 to 90.",
            "type": "number",
            "minimum": -90,
            "maximum": 90
        },

        "RelatedURLType": {
            "type": "object",
            "additionalProperties": false,
            "properties":{
                "URL": {
                    "description": "Description of the web page at this URL.",
                    "type": "string",
                    "format": "uri",
                    "minLength": 1,
                    "maxLength": 2048,
                    "maxItems": 1
                },
                "Description": {
                    "description": "",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 4000,
                    "maxItems": 1
                },
                "URLContentType": {
                    "description":"A keyword describing the distinct content type of the online resource to this resource. (e.g., 'DATACENTER URL', 'DATA CONTACT URL', 'DISTRIBUTION URL'). The valid values are contained in the KMS System: https://gcmd.earthdata.nasa.gov/KeywordViewer/scheme/all/8759ab63-ac04-4136-bc25-0c00eece1096.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "Type": {
                    "description": "A keyword describing the type of the online resource to this resource. This helps the GUI to know what to do with this resource. (e.g., 'GET DATA', 'GET SERVICE', 'GET VISUALIZATION'). The valid values are contained in the KMS System: https://gcmd.earthdata.nasa.gov/KeywordViewer/scheme/all/8759ab63-ac04-4136-bc25-0c00eece1096.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "Subtype":{
                    "description":"A keyword describing the subtype of the online resource to this resource. This further helps the GUI to know what to do with this resource. (e.g., 'MEDIA', 'BROWSE', 'OPENDAP', 'OPENSEARCH', 'WEB COVERAGE SERVICES', 'WEB FEATURE SERVICES', 'WEB MAPPING SERVICES', 'SSW', 'ESI'). The valid values are contained in the KMS System: https://gcmd.earthdata.nasa.gov/KeywordViewer/scheme/all/8759ab63-ac04-4136-bc25-0c00eece1096.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "Format": {
                    "description":"Describes the organization of the data content so that users and applications know how to read and use the content. The controlled vocabulary for formats is maintained in the Keyword Management System (KMS): https://gcmd.earthdata.nasa.gov/KeywordViewer/scheme/DataFormat?gtm_scheme=DataFormat",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "MimeType": {
                    "description": "The multi-purpose internet mail extensions indicates the nature and format of the data that is accessed through the URL. The controlled vocabulary for MimeTypes is maintained in the Keyword Management System (KMS): https://gcmd.earthdata.nasa.gov/KeywordViewer/scheme/MimeType?gtm_scheme=MimeType",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                }
            },
            "required":["URL", "URLContentType", "Type"]
        },

        "AdditionalAttributeType": {
            "type": "object",
            "additionalItems": false,
            "properties": {
                "Name": {
                    "description": "The name (1 word description) of the additional attribute.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "Description": {
                    "description": "Free-text description of the additional attribute.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 2048,
                    "maxItems": 1
                },
                "Value": {
                    "description": "Value of the additional attribute if it is the same for all entries.  If the value of the additional attribute may differ by entries in the grid, leave this value blank.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "DataType": {
                    "description": "Data type of the values of the additional attribute.",
                    "type": "string",
                    "enum": ["STRING", "FLOAT", "INT", "BOOLEAN", "DATE", "TIME",
                        "DATETIME", "DATE_STRING", "TIME_STRING", "DATETIME_STRING"],
                    "maxItems": 1
                },
                "MesurementResolution": {
                    "description": "The smallest unit increment to which the additional attribute value is measured.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "ParameterRangeBegin": {
                    "description": "The minimum value of the additional attribute over the whole data.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "ParameterRangeEnd": {
                    "description": "The maximum value of the additional attribute over the whole data.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "ParameterUnitsOfMeasure": {
                    "description": "The standard unit of measurement for the additional attribute.  For example, meters, hertz.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "ParameterValueAccuracy": {
                    "description": "An estimate of the accuracy of the values of the additional attribute. For example, measurement error or precision-measurement error or precision of a data product parameter. This can be specified in percent or the unit with which the parameter is measured.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems": 1
                },
                "ValueAccuracyExplanation": {
                    "description": "Describes the method used for determining the parameter value accuracy that is given for this additional attribute.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 2048,
                    "maxItems": 1
                },
                "Group": {
                    "description": "Identifies a namespace for the additional attribute name.",
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 80,
                    "maxItems":1
                },
                "UpdateDate": {
                    "description": "The date this additional attribute information was updated.",
                    "type": "string",
                    "format": "date-time",
                    "maxItems": 1
                }
            },
            "required": ["Name", "DataType", "Description"],
            "dependentRequired": {
                "ParameterRangeBegin": ["ParameterRangeEnd"],
                "ParameterRangeEnd": ["ParameterRangeBegin"]
            }
        }
    }
}